import{StrictMode as S}from"react";import{createRoot as I}from"react-dom/client";import{useState as B,useCallback as V}from"react";import{useEffect as J,useRef as z}from"react";var A=typeof window.GetParentResourceName!=="function";function K(w,r){window.dispatchEvent(new MessageEvent("message",{data:{action:w,...r}}))}function R(w,r){let p=z(r);J(()=>{p.current=r},[r]),J(()=>{function M(D){let{action:d,...g}=D.data||{};if(d===w)p.current(g)}return window.addEventListener("message",M),()=>window.removeEventListener("message",M)},[w])}if(A)setTimeout(()=>K("setVisible",{visible:!0}),100);import{useEffect as Q,useState as U}from"react";import{AlertCircle as W,CheckCircle as Y,Info as Z,AlertTriangle as _,Shield as F,Ambulance as X,Newspaper as v,Bell as L,X as y}from"lucide-react";import{jsx as u,jsxs as b}from"react/jsx-runtime";function O({notification:w,onRemove:r}){let[p,M]=U(!1);Q(()=>{if(console.log(`[Notification] ${w.title} - Duration: ${w.duration}ms`),w.duration<=0)return;let E=setTimeout(()=>{console.log(`[Notification] ${w.title} - Starting exit animation`),M(!0),setTimeout(r,600)},w.duration);return()=>{clearTimeout(E)}},[w.duration,r,w.title]);let D=()=>{M(!0),setTimeout(r,600)},d=()=>{let k={error:"bg-gradient-to-br from-red-950 to-red-900 border border-red-700/50",success:"bg-gradient-to-br from-emerald-950 to-emerald-900 border border-emerald-700/50",info:"bg-gradient-to-br from-blue-950 to-blue-900 border border-blue-700/50",warning:"bg-gradient-to-br from-amber-950 to-amber-900 border border-amber-700/50",police:"bg-gradient-to-br from-blue-950 via-blue-900 to-slate-900 border border-blue-600/50 shadow-blue-900/50",ems:"bg-gradient-to-br from-red-950 via-red-900 to-slate-900 border border-red-600/50 shadow-red-900/50",news:"bg-gradient-to-br from-purple-950 to-purple-900 border border-purple-700/50",cityalert:"bg-gradient-to-br from-orange-950 to-orange-900 border border-orange-700/50",custom:w.backgroundColor?"border border-opacity-30":"bg-gradient-to-br from-slate-900 to-slate-800 border border-slate-700/50"},T={backgroundColor:w.type==="custom"&&w.backgroundColor?w.backgroundColor:void 0};return{className:`pointer-events-auto rounded-lg shadow-2xl overflow-hidden transform transition-all duration-500 ${k[w.type]||k.info} ${p?"opacity-0 translate-x-[120%]":"opacity-100 translate-x-0"}`,style:T}},g=()=>{let k={error:"text-red-400",success:"text-emerald-400",info:"text-blue-400",warning:"text-amber-400",police:"text-blue-300",ems:"text-red-300",news:"text-purple-400",cityalert:"text-orange-400",custom:w.color?"":"text-slate-400"},T=w.type==="custom"&&w.icon?"":k[w.type]||k.info;switch(w.type){case"error":return u(W,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"success":return u(Y,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"info":return u(Z,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"warning":return u(_,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"police":return u(F,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"ems":return u(X,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"news":return u(v,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"cityalert":return u(L,{className:`w-6 h-6 flex-shrink-0 ${T}`});case"custom":return w.icon?u("span",{className:"w-6 h-6 flex-shrink-0 text-2xl flex items-center justify-center",children:w.icon}):u(L,{className:`w-6 h-6 flex-shrink-0 ${T}`});default:return u(L,{className:`w-6 h-6 flex-shrink-0 ${T}`})}},$=()=>{if((w.type==="police"||w.type==="ems")&&w.customData?.location)return b("div",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1.5",children:[u("span",{className:"text-lg",children:"\uD83D\uDCCD"}),u("span",{children:w.customData.location})]});return null},G=()=>{return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})},H=d();return b("div",{className:H.className,style:H.style,children:[(w.type==="police"||w.type==="ems")&&!p&&u("div",{className:"absolute inset-0 animate-pulse pointer-events-none",children:u("div",{className:`absolute inset-0 ${w.type==="police"?"bg-blue-500/20":"bg-red-500/20"}`})}),b("div",{className:"p-4 flex gap-4 relative z-10",children:[u("div",{className:"flex-shrink-0 mt-0.5",children:g()}),u("div",{className:"flex-1 min-w-0",children:b("div",{className:"flex items-start justify-between gap-3",children:[b("div",{className:"flex-1",children:[u("h3",{className:"font-bold text-sm text-white",children:w.title||"Notification"}),u("p",{className:"text-xs text-gray-300 mt-1",children:w.message}),$()]}),b("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[u("span",{className:"text-xs text-gray-500",children:G()}),u("button",{onClick:D,className:"p-1 hover:bg-white/10 rounded transition-colors duration-200","aria-label":"Close notification",children:u(y,{className:"w-4 h-4 text-gray-400 hover:text-white"})})]})]})})]}),!p&&u("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10 overflow-hidden",children:u("div",{className:`h-full ${w.type==="error"?"bg-red-500":w.type==="success"?"bg-emerald-500":w.type==="warning"?"bg-amber-500":w.type==="police"?"bg-blue-500":w.type==="ems"?"bg-red-500":w.type==="news"?"bg-purple-500":w.type==="cityalert"?"bg-orange-500":"bg-blue-500"}`,style:{width:"100%",animation:`shrinkWidth ${w.duration}ms linear forwards`}})})]})}import{jsx as P}from"react/jsx-runtime";function e(){let[w,r]=B([]),p=V((d)=>{let g=`${Date.now()}-${Math.random()}`,$={...d,id:g};if(r((G)=>[...G,$]),d.sound!==!1)D(d.type)},[]),M=V((d)=>{r((g)=>g.filter(($)=>$.id!==d))},[]);R("addNotification",(d)=>{console.log("[NotificationContainer] Received:",{title:d.title,duration:d.duration,type:d.type}),p(d)});let D=(d)=>{let g={error:"❌",success:"✅",info:"ℹ️",warning:"⚠️",police:"\uD83D\uDE94",ems:"\uD83D\uDE91",news:"\uD83D\uDCF0",cityalert:"\uD83D\uDCE2"}};return P("div",{className:"fixed top-1/2 right-0 transform -translate-y-1/2 pointer-events-none p-6",children:P("div",{className:"flex flex-col gap-3 max-w-md",children:w.map((d)=>P(O,{notification:d,onRemove:()=>M(d.id)},d.id))})})}import{jsx as h}from"react/jsx-runtime";function m(){return h("div",{className:"w-screen h-screen bg-transparent",children:h(e,{})})}import{jsx as q}from"react/jsx-runtime";var N=I(document.getElementById("root"));N.render(q(S,{children:q(m,{})}));
